From 128bd3942789e8d27c8b454d81c9a9165eb84fb3 Mon Sep 17 00:00:00 2001
From: zhongfly <11155705+zhongfly@users.noreply.github.com>
Date: Sat, 17 Jan 2026 12:03:43 +0800
Subject: [PATCH] openssl: use winstore by default

---
 ...openssl-0001-use-winstore-by-default.patch | 26 +++++++++++++++++++
 1 file changed, 26 insertions(+)
 create mode 100644 packages/openssl-0001-use-winstore-by-default.patch

diff --git a/packages/openssl-0001-use-winstore-by-default.patch b/packages/openssl-0001-use-winstore-by-default.patch
new file mode 100644
index 0000000..69a3d15
--- /dev/null
+++ b/packages/openssl-0001-use-winstore-by-default.patch
@@ -0,0 +1,26 @@
+From 8169a88e5ede8b5bf36c4e8732e82c7efe92e5cd Mon Sep 17 00:00:00 2001
+From: Andarwinux <Andarwinux@users.noreply.github.com>
+Date: Fri, 8 Aug 2025 00:00:00 +0000
+Subject: [PATCH] use winstore by default
+
+---
+ crypto/x509/by_store.c | 4 ++++
+ 1 file changed, 4 insertions(+)
+
+diff --git a/crypto/x509/by_store.c b/crypto/x509/by_store.c
+index 3849669..48ff4c2 100644
+--- a/crypto/x509/by_store.c
++++ b/crypto/x509/by_store.c
+@@ -133,6 +133,10 @@ static int by_store_ctrl_ex(X509_LOOKUP *ctx, int cmd, const char *argp,
+ {
+     switch (cmd) {
+     case X509_L_ADD_STORE:
++#ifdef _WIN32
++        if (argp == NULL)
++            argp = "org.openssl.winstore://";
++#endif
+         if (argp != NULL) {
+             STACK_OF(CACHED_STORE) *stores = X509_LOOKUP_get_method_data(ctx);
+             CACHED_STORE *store = OPENSSL_zalloc(sizeof(*store));
+-- 
+2.52.0
-- 
2.52.0
